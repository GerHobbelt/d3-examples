#! /bin/bash

#
# http://bost.ocks.org/mike/join/
# http://bost.ocks.org/mike/d3/workshop/
# http://vimeo.com/29458354
# http://mbostock.github.com/d3/talk/20110921/#0
# http://bost.ocks.org/mike/uberdata/
# http://bost.ocks.org/mike/chart/
# http://bost.ocks.org/mike/path/
# https://github.com/mbostock/stack
#

pushd .
mkdir d3-gists
cd d3-gists

echo "<html><body>" > gists.html

echo "<h1>D3 example/test gists by others:</h1>" >> gists.html
echo "<dl>" >> gists.html

for f in \
	1005090 \
	1005873 \
	1009139 \
	1009308 \
	1014829 \
	1016220 \
	1016860 \
	1020902 \
	1021103 \
	1021841 \
	1021953 \
	1026649 \
	1036776 \
	1044242 \
	1046712 \
	1061834 \
	1062288 \
	1062383 \
	1062544 \
	1065859 \
	1065861 \
	1067616 \
	1067636 \
	1071269 \
	1071981 \
	1073373 \
	1074045 \
	1075123 \
	1076158 \
	1083726 \
	1083732 \
	1086421 \
	1087001 \
	1090203 \
	1090691 \
	1093025 \
	1093130 \
	1095727 \
	1095795 \
	1096355 \
	1098617 \
	1100394 \
	1117287 \
	1123639 \
	1125339 \
	1125458 \
	1125997 \
	1129492 \
	1133472 \
	1125997 \
	2514902 \
	1136236 \
	1137131 \
	1139473 \
	1148172 \
	1148365 \
	1153292 \
	1155488 \
	1157415 \
	1157787 \
	1159696 \
	1160929 \
	1163659 \
	1166403 \
	1169680 \
	1171371 \
	1175688 \
	1177827 \
	1177880 \
	1179647 \
	1182434 \
	1182485 \
	1184766 \
	1185705 \
	1187808 \
	1195063 \
	1197731 \
	1198017 \
	1199811 \
	1202253 \
	1212197 \
	1212215 \
	1214915 \
	1218859 \
	1219585 \
	1221654 \
	1221675 \
	1222777 \
	1224222 \
	1225313 \
	1233904 \
	1246403 \
	1249681 \
	1249958 \
	1252867 \
	1256572 \
	1257485 \
	1262305 \
	1263239 \
	1266259 \
	1269004 \
	1271058 \
	1275654 \
	1275742 \
	1276463 \
	1277254 \
	1277968 \
	1283663 \
	1288493 \
	1291667 \
	1291672 \
	1303584 \
	1305111 \
	1305337 \
	1305347 \
	1306365 \
	1308257 \
	1308400 \
	1313857 \
	1314483 \
	1317455 \
	1320232 \
	1321837 \
	1322814 \
	1322907 \
	1322948 \
	1323729 \
	1323841 \
	1325574 \
	1326318 \
	1337511 \
	1339996 \
	1341679 \
	1345853 \
	1346395 \
	1346410 \
	1353700 \
	1357601 \
	1357620 \
	1363743 \
	1367999 \
	1368205 \
	1371412 \
	1373819 \
	1374397 \
	1377729 \
	1378144 \
	1379988 \
	1386444 \
	1389927 \
	1393200 \
	1399097 \
	1399117 \
	1399211 \
	1404346 \
	1423627 \
	1439005 \
	1441881 \
	1457934 \
	1469438 \
	1473535 \
	1483226 \
	1484345 \
	1488375 \
	1488680 \
	1491435 \
	1502762 \
	1502887 \
	1503463 \
	1505811 \
	1508606 \
	1509502 \
	1516547 \
	1535916 \
	1536332 \
	1642874 \
	1642989 \
	1643051 \
	1653763 \
	1869677	\
	1871853 \
	1893974 \
	1920939 \
	1962173 \
	2005817 \
	2086461 \
	2164562 \
	2287399 \
	2289263 \
	2295263 \
	2368837 \
	458648 \
	583229 \
	583734 \
	584742 \
	597287 \
	597292 \
	600164 \
	603062 \
	603148 \
	609059 \
	625531 \
	625657 \
	645734 \
	645758 \
	647888 \
	660054 \
	665906 \
	667245 \
	672899 \
	675512 \
	705856 \
	710387 \
	843177 \
	844752 \
	846688 \
	846704 \
	846710 \
	847677 \
	849853 \
	870118 \
	881980 \
	882152 \
	899649 \
	899670 \
	899711 \
	906688 \
	929623 \
	938288 \
	939927 \
	940838 \
	950642 \
	972398 \
	993912 \
	999346 \		; do
	if ! test -d gist-$f ; then
		git clone git://gist.github.com/$f.git gist-$f
	fi
	pushd .
	cd gist-$f
	git pull --all
	popd
	echo "<dt>$f (View: <a href='http://bl.ocks.org/$f'>bl.ocks.org</a> / <a href='./gist-$f/'>local</a>)</dt>" >> gists.html
	if ! test -f $f.txt ; then
		curl -o $f.txt https://api.github.com/gists/$f 
	fi
	echo "<dd>" >> gists.html
	grep '"description"' $f.txt >> gists.html
	echo "</dd>" >> gists.html
done

echo "</dl>" >> gists.html
echo "<h1>My own gists:</h1>" >> gists.html

#
# and clone/pull our own D3 related gists as well:
#
echo "<dl>" >> gists.html
for f in \
		1547192 \
		1867866 \
		1883717 \
		1887532 \
		1965462 \
		2286893 \
		2366983 \
		; do
	if ! test -d my-gist-$f ; then
		git clone git@gist.github.com:$f.git my-gist-$f
	fi
	pushd .
	cd my-gist-$f
	git pull --all
	popd
	echo "<dt>$f (View: <a href='http://bl.ocks.org/$f'>bl.ocks.org</a> / <a href='./my-gist-$f/'>local</a></dt>" >> gists.html
	if ! test -f my-$f.txt ; then
		curl -o my-$f.txt https://api.github.com/gists/$f 
	fi
	echo "<dd>" >> gists.html
	grep '"description"' my-$f.txt >> gists.html
	echo "</dd>" >> gists.html
done
echo "</dl>" >> gists.html

popd

